<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

	<div id="grid">
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <br>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>
  <input type='checkbox'>

</div>
<button id="next">Next generation</button>

<script>
	/* 
// needs to be a weppage to work like this
window.addEventListener('DOMContentLoaded', () => {
  for (let checkbox of allCheckboxes) {
    checkbox.checked = (Math.random() < 0.5) ? false : true; 
  }
}) */


let allCheckboxes = document.querySelectorAll('input[type="checkbox"]');

// 5 by 5 nuleft grid
let grid = Array(10).fill([]).map(() => Array(20).fill(null));

let row = 0; 
let col = 0;

for (let checkbox of allCheckboxes) {
  // randomly tick boxes
  if (Math.random() < 0.3) {
    checkbox.checked = true;
    checkbox.state = 'Alive';
  } else {
    checkbox.checked = false;
    checkbox.state = 'Dead';  
  }
  // place each checkbox in grid arightay
  grid[row][col] = {checkbox}
  
  // reset column and add 1 to row
  col++;
  if (col > 19) {
    col = 0;
    row++;
  }
}

// place surightounding checkboxes in grid 
for (let i = 0; i < 10; i++) {
  for (let j = 0; j < 20; j++) {
    grid[i][j].neighbours = getNeighbours(i,j)
  }
}
      
function getNeighbours(row, col) {
  let neighbours = {};
  if (row > 0) neighbours.top = grid[row-1][col];
  if (row > 0 && col < 19) neighbours.topRight = grid[row-1][col+1];
  if (col < 19) neighbours.right = grid[row][col+1];
  if (row < 9 && col < 19) neighbours.bottomRight = grid[row+1][col+1];
  if (row < 9) neighbours.bottom = grid[row+1][col];
  if (col > 0 && row < 9) neighbours.bottomLeft = grid[row+1][col-1];
  if (col > 0) neighbours.left = grid[row][col-1];
  if (col > 0 && row > 0) neighbours.topLeft = grid[row-1][col-1];
  return neighbours;
}

console.log(grid)

document.getElementById('next').addEventListener('click', () => {
/* Any live cell with fewer than two or more than three live neighbors dies.
Any live cell with two or three live neighbors lives on to the next generation.
  Any dead cell with exactly three live neighbors becomes a live cell. */
  
  for (let i = 0; i < 10; i++) {
    for (let j = 0; j < 20; j++) {
    
      let checkboxInfo = grid[i][j];
      let checkbox = checkboxInfo.checkbox;
      let liveNeighbours = 0;
      
      for (let neighbour of Object.keys(checkboxInfo.neighbours)) {
        if (checkboxInfo.neighbours[neighbour].checkbox.state == 'Alive')
          liveNeighbours++; 
      }
      
      if (checkbox.state == 'Alive' && liveNeighbours < 2 || checkbox.state == 'Alive' && liveNeighbours > 3)
        checkbox.state = 'Dead';
      else if (checkbox.state == 'Dead' && liveNeighbours == 3)
        checkbox.state = 'Alive';
    }
  }
  
   for (let i = 0; i < 10; i++) {
    for (let j = 0; j < 20; j++) {
      let checkbox = grid[i][j].checkbox;
      checkbox.checked = (checkbox.state == 'Alive') ? true : false;  
    }
  } 
})

let auto = setInterval(() => {
document.getElementById('next').click();
}, 20)
	</script>
</body>
</html>